<form class="form" (ngSubmit)="onSubmit()"  [formGroup]="addRecipeForm">
    <label for="name">Name</label>
    <input class="form-control" formControlName="name" [(ngModel)]="recipe!.name">

    <label for="time">Time</label>
    <input type="number" class="form-control" formControlName="time" [(ngModel)]="recipe!.time">

    <label for="forAmountOfPeople">For how many people</label>
    <input type="number" class="form-control" formControlName="forAmountOfPeople" [(ngModel)]="recipe!.forAmountOfPeople">
    <br>
    <div >
        <button class="btn btn-danger" (click)="addIngredient()">Add ingredient</button>
        <br>
        <div class="row" formArrayName="ingredients">
            <div class="col-md-6" *ngFor="let d of ingredients.controls; let i = index">
                <div [formGroupName]="i">
                    <br>
                    <label for="name">Name:</label>
                    <input class="form-control" type="text" formControlName="name" placeholder="Name ingredient">
                    <br>
                    <label for="amount">Amount:</label>
                    <input class="form-control" type="number" formControlName="amount" placeholder="Amount ingredient">
                    <br>
                    <label for="size">Size</label>
                    <select class="form-control" formControlName="size">
                        <option value="" disabled [selected]="true"> Choose a size...</option>
                        <optgroup label="Dry">
                            <option value="Cups">Cups</option>
                            <option value="Dashes">Dashes</option>
                            <option value="Ounces">Ounces</option>
                            <option value="Pinches">Pinches</option>
                            <option value="Tablespoons">Tablespoons</option>
                            <option value="Teaspoons">Teaspoons</option>
                            <option value="Pounds">Pounds</option>
                            <option value="Each">Each</option>
                            <option value="Grams">Grams</option>
                        </optgroup>
                        <optgroup label="Liquids">
                            <option value="Cups">Cups</option>
                            <option value="Gallons">Gallons</option>
                            <option value="Ounces">Ounces</option>
                            <option value="Pints">Pints</option>
                            <option value="Quarts">Quarts</option>
                            <option value="Tablespoons">Tablespoons</option>
                            <option value="Teaspoons">Teaspoons</option>
                            <option value="Millilitre">Millilitre</option>
                        </optgroup>
                    </select>
                    <div class="row" formGroupName="nutrition">
                        <div class="col-md-4">
                            <label for="calories">Calories:</label>
                            <input class="form-control" type="number" formControlName="calories" placeholder="0.0">
                        </div>
                        <div class="col-md-4">
                            <label for="carbohydrates">Carbohydrates:</label>
                            <input class="form-control" type="number" formControlName="carbohydrates" placeholder="0.0">
                        </div>
                        <div class="col-md-4">
                            <label for="sodium">Sodium:</label>   
                            <input class="form-control" type="number" formControlName="sodium" placeholder="0.0">
                        </div>
                        <div class="col-md-4">
                            <label for="protein">Protein:</label>
                            <input class="form-control" type="number" formControlName="protein" placeholder="0.0">
                        </div>
                        <div class="col-md-4">
                            <label for="fat">Fat:</label>
                            <input class="form-control" type="number" formControlName="fat" placeholder="0.0">
                        </div>
                        <div class="col-md-4">
                            <label for="fiber">Fiber:</label>
                            <input class="form-control" type="number" formControlName="fiber" placeholder="0.0">
                        </div>
                    </div>
                    <br>
                    <button class="btn btn-danger" (click)="deleteIngredient(i)">remove</button>
                </div>
                <br>
            </div>
        </div>
    </div>
    <div *ngIf="invalidForm && ingredients.length <= 1" class="alert alert-danger">
        Please add 2 or more ingredients
    </div>

    <br>
    <button (click)="addDescription()" class="btn btn-danger">Add cooking step</button>
    <br>
    <label for="description">Cooking instructions</label>
    <br>
    <div formArrayName="description">
        <div *ngFor="let d of description.controls; let i = index"> 
            Step: {{i + 1}}
        <textarea type="text" class="form-control" [formControlName]="i" ></textarea>
        </div>
        <div *ngIf="description.length > 1">
            <br>
            <button (click)="deleteDescription(description.length - 1)" class="btn btn-danger">Delete step</button> 
        </div>
    </div>
    <div *ngIf="invalidForm && description.length <= 0" class="alert alert-danger">
        Please add 1 or more Cooking steps
    </div>
    <br>
    <label for="tips">Tips</label>
    <input class="form-control" formControlName="tips" [(ngModel)]="recipe!.tips">
    <br>
    <label for="imgUrl">img Url</label>
    <input class="form-control" formControlName="imgUrl" [(ngModel)]="recipe!.imgUrl">
    <br>
    <button type="submit" class="btn btn-success" [disabled]="addRecipeForm.invalid">Save</button>
</form>
